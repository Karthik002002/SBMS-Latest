"use strict";(self.webpackChunkfalcon_react=self.webpackChunkfalcon_react||[]).push([[164],{19164:function(e,a,s){s.r(a),s.d(a,{default:function(){return j}});var r=s(29439),t=s(47313),n=s(21664),l=s(46022),c=s(1413),o=s(465),i=s(46417),d=function(e){var a=e.getTableProps,s=e.headers,r=e.page,t=e.prepareRow,n=e.headerClassName,l=e.bodyClassName,d=e.rowClassName,u=e.tableProps;return(0,i.jsx)("div",{className:"table-container",style:{position:"relative"},children:(0,i.jsx)("div",{className:"table-responsive scrollbar dashboard-list-table",children:(0,i.jsxs)(o.Z,(0,c.Z)((0,c.Z)({},a(u)),{},{className:"",style:{minWidth:"-webkit-fill-available"},children:[(0,i.jsx)("thead",{className:n,style:{position:"sticky",top:0,zIndex:1,backgroundColor:"white"},children:(0,i.jsx)("tr",{children:s.map((function(e,a){return(0,i.jsxs)("th",(0,c.Z)((0,c.Z)({},e.getHeaderProps(e.getSortByToggleProps(e.headerProps))),{},{children:[e.render("Header"),e.canSort?e.isSorted?e.isSortedDesc?(0,i.jsx)("span",{className:"sort desc"}):(0,i.jsx)("span",{className:"sort asc"}):(0,i.jsx)("span",{className:"sort"}):""]}),a)}))})}),(0,i.jsx)("tbody",{className:l,children:r.map((function(e,a){return t(e),(0,i.jsx)("tr",(0,c.Z)((0,c.Z)({className:d},e.getRowProps()),{},{children:e.cells.map((function(e,a){return(0,i.jsx)("td",(0,c.Z)((0,c.Z)({},e.getCellProps(e.column.cellProps)),{},{children:e.render("Cell")}),a)}))}),a)}))})]}))})})},u=s(97805),m=s(81722),f=s(63849),x=s(31616),h=s(93298),p=s(73158),N=s(2135),v=function(e){var a=e.selectedRowIds,s=e.Schooldata,n=e.CompanyData,l=(0,m.K)(),c=l.setFilter,o=l.setCompanyFilter,d=(0,t.useState)(!1),v=(0,r.Z)(d,2),b=v[0],j=v[1],k=(0,t.useState)(""),g=(0,r.Z)(k,2),Z=g[0],C=g[1];return(0,i.jsxs)(f.Z,{className:"flex-between-center",children:[(0,i.jsx)(x.Z,{xs:4,sm:"auto",className:"d-flex align-items-center pe-0",children:(0,i.jsx)("h5",{className:"fs-0 mb-0 text-nowrap py-2 py-xl-0 ms-3",children:"Vehicle List"})}),(0,i.jsx)(x.Z,{xs:8,sm:"auto",className:"ms-auto text-end ps-0",children:Object.keys(a).length>0?(0,i.jsx)("div",{className:"d-flex",children:(0,i.jsx)(N.rU,{to:"/trackingpage",children:(0,i.jsx)(h.Z,{type:"button",variant:"falcon-default",size:"sm",className:"ms-2",children:"Track"})})}):(0,i.jsxs)("div",{id:"orders-actions",className:"dashboard-filter d-flex",children:[b&&(0,i.jsx)("button",{onClick:function(){j(!1),c(null),o(null)},className:"btn me-2 filter-clear-btn fs--1 pb-1",children:"Clear Filters"}),(0,i.jsxs)(p.Z,{children:[(0,i.jsxs)(p.Z.Toggle,{variant:"falcon-default",size:"sm",className:"mx-2",icon:"filter",children:[(0,i.jsx)(u.G,{variant:"falcon-default",size:"sm",icon:"filter",className:"me-2 border-0"}),"Company"]}),(0,i.jsx)(p.Z.Menu,{children:null===n||void 0===n?void 0:n.map((function(e,a){return(0,i.jsx)(p.Z.Item,{active:Z===e,onClick:function(){return function(e){o(e),C(e),j(!0)}(e)},children:e},a)}))})]}),(0,i.jsxs)(p.Z,{children:[(0,i.jsxs)(p.Z.Toggle,{variant:"falcon-default",size:"sm",className:"mx-2",icon:"filter",children:[(0,i.jsx)(u.G,{variant:"falcon-default",size:"sm",icon:"filter",className:"me-2 border-0"}),"School"]}),(0,i.jsx)(p.Z.Menu,{children:s.map((function(e,a){return(0,i.jsx)(p.Z.Item,{active:Z===e,onClick:function(){return function(e){c(e),C(e),j(!0)}(e)},children:e},a)}))})]})]})})]})},b=s(81529),j=function(e){var a=e.data,s=(0,m.K)(),c=s.Filter,o=s.companyFilter,u=(0,t.useState)(a),f=(0,r.Z)(u,2),x=f[0],h=f[1],p=(0,t.useState)(a),N=(0,r.Z)(p,2),j=N[0],k=N[1],g=[],Z=[];null===x||void 0===x||x.map((function(e){Z.includes(e.school_name)||Z.push(e.school_name),g.includes(e.Company_name)||g.push(e.Company_name)})),(0,t.useEffect)((function(){if(c&&"All"!==c.zone){var e=j.filter((function(e){return e.zone===c.zone}));h(e)}else null===c&&h(j)}),[c]),(0,t.useEffect)((function(){h(a),k(a)}),[a]),(0,t.useEffect)((function(){if(null!==o){var e=j.filter((function(e){return e.Company_name===o}));h(e)}else null===o&&h(j)}),[o]),(0,t.useEffect)((function(){if(null!==c){var e=j.filter((function(e){return e.school_name===c}));h(e)}else null===c&&h(j)}),[c]);var C=[{accessor:"vehicle_name",Header:"Name",headerProps:{className:"text-center"}},{accessor:"vehicle_reg",Header:"Reg Num",headerProps:{className:"text-center"},cellProps:{className:"text-break text-center"},Cell:function(e){return e.value||"-"}},{accessor:"speed",Header:"Speed",headerProps:{className:"text-center"},cellProps:{className:"text-break text-center"},Cell:function(e){var a=e.value;return void 0!==a?a:"-"}},{accessor:"ignition",Header:"Ignition",headerProps:{className:"text-center"},cellProps:{className:"text-break text-center"},Cell:function(e){return!0===e.value?"True":"False"}},{accessor:"driver",Header:"Driver Name",headerProps:{className:"text-center"},cellProps:{className:"text-break text-center"},Cell:function(e){return e.value||"-"}},{accessor:"phone",Header:"Phone No",headerProps:{className:"text-center"},cellProps:{className:"text-break text-center"},Cell:function(e){return e.value||"-"}},{accessor:"status",Header:"Status",headerProps:{className:"text-center"},cellProps:{className:"text-break text-center"},Cell:function(e){return function(e,a){var s;switch(e){case 0:s="Running";break;case 1:s="Idle";break;case 2:s="Stopped";break;case 3:s="Towed";break;case 4:s="No Data";break;case 5:s="Out of Network";break;case 6:s="Parked";break;default:s="-"}return a&&(s="RashDriving"),s}(e.value,e.row.original.speed_status)||"-"}},{accessor:"track",Header:"Track",headerProps:{className:"text-center"},Cell:function(e){var a=e.row;return(0,i.jsx)("div",{onClick:function(){return console.log(a.original.imei)},children:(0,i.jsx)(b.Z,{variant:"falcon-default",size:"sm",icon:"external-link-alt",transform:"shrink-3"})})}}];return(0,i.jsx)("div",{className:"h-100 ".concat(window.innerWidth<450?"ms-3":"ms-2"),children:(0,i.jsx)(l.Z,{columns:C,data:x,children:(0,i.jsxs)(n.Z,{children:[(0,i.jsx)(n.Z.Header,{children:(0,i.jsx)(v,{table:!0,Schooldata:Z,CompanyData:g})}),(0,i.jsx)(n.Z.Body,{className:"p-0  ",children:(0,i.jsx)(d,{table:!0,headerClassName:"bg-200 text-900 text-nowrap align-middle",rowClassName:"btn-reveal-trigger text-nowrap align-middle",tableProps:{size:"sm",className:"fs--1 mb-0 overflow-hidden"}})})]})})})}}}]);